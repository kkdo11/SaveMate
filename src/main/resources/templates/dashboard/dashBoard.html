<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <title>SAVEMATE - ëŒ€ì‹œë³´ë“œ</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.3.0/dist/chart.umd.min.js"></script>
  <meta name="_csrf" th:content="${_csrf.token}" />
  <meta name="_csrf_header" th:content="${_csrf.headerName}" />
  <script th:inline="javascript">
    const isAuthenticated = /*[[${#authorization.expression('isAuthenticated()')}]]*/ false;
  </script>
  <script>
    function csrfFetch(url, options = {}) {
      const csrfToken = document.querySelector('meta[name="_csrf"]').getAttribute("content");
      const csrfHeader = document.querySelector('meta[name="_csrf_header"]').getAttribute("content");
      options.headers = {
        'Content-Type': 'application/json',
        [csrfHeader]: csrfToken,
        ...(options.headers || {})
      };
      return fetch(url, {
        ...options,
        credentials: 'same-origin'
      });
    }
  </script>
</head>

<body class="bg-gradient-to-r from-indigo-100 via-purple-100 to-pink-100 text-gray-800 font-sans leading-relaxed min-h-screen">

<div th:replace="~{navbar :: navbar}"></div>

<!-- âœ… MAIN DASHBOARD SECTION (í†¤ í†µì¼ ì ìš©) -->
<main class="max-w-7xl mx-auto p-6 mt-10 bg-gray-50 rounded-lg shadow-md border border-gray-200">

  <h2 class="text-2xl font-bold mb-8 text-gray-800 flex items-center gap-2">
    ðŸ“Š ì˜ˆì‚° ëŒ€ì‹œë³´ë“œ
  </h2>

  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
    <!-- Pie Chart Card -->
    <section class="p-5 bg-white rounded-lg border border-gray-200 shadow-sm hover:shadow-md transition">
      <h3 class="text-lg font-semibold text-gray-700 mb-4 flex items-center gap-2">
        ðŸŽ¯ ì¹´í…Œê³ ë¦¬ë³„ ì†Œë¹„ ë¹„ìœ¨
      </h3>
      <div class="flex-grow flex items-center justify-center">
        <canvas id="category-pie-chart" class="w-full max-h-[340px]"></canvas>
      </div>
    </section>

    <!-- Bar Chart Card -->
    <section class="p-5 bg-white rounded-lg border border-gray-200 shadow-sm hover:shadow-md transition">
      <h3 class="text-lg font-semibold text-gray-700 mb-4 flex items-center gap-2">
        ðŸ“ˆ ì›”ë³„ ì˜ˆì‚° vs ì†Œë¹„
      </h3>
      <div class="flex-grow">
        <canvas id="monthly-bar-chart" class="w-full h-full"></canvas>
      </div>
    </section>
  </div>
</main>


<!-- âœ… CHART SCRIPT SECTION -->
<script src="/js/dashboard.js"></script>
<script src="/js/notification.js"></script>

</body>
</html>
