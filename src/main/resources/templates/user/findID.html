<!DOCTYPE html>
<html lang="ko">
<head>
    <!-- META íƒœê·¸ë¡œ token ì „ë‹¬ -->
    <meta name="_csrf" th:content="${_csrf.token}"/>
    <meta name="_csrf_header" th:content="${_csrf.headerName}"/>

    <meta charset="UTF-8">
    <title>ì•„ì´ë”” ì°¾ê¸°</title>

    <script>
        console.log("ğŸ”¥ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ë¨");
    </script>





    <!-- âœ… jQuery + Tailwind -->
    <script src="/js/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- âœ… ì „ì—­ CSRF ì²˜ë¦¬ ìŠ¤í¬ë¦½íŠ¸ -->
    <script>

        $(document).ajaxSend(function (e, xhr, options) {
            const token = $("meta[name='_csrf']").attr("content");
            const header = $("meta[name='_csrf_header']").attr("content");
            xhr.setRequestHeader(header, token);
        });

        $(document).ready(function () {
            $("#btnLogin").on("click", function () {
                location.href = "/user/login";
            });

            $("#btnFindPwd").on("click", function () {
                location.href = "/user/findPWD";
            });

            $("#btnUserReg").on("click", function () {
                location.href = "/user/userRegForm";
            });

            $("#findIdForm").on("submit", function (e) {
                e.preventDefault();

                const name = $("#name").val().trim();
                const email = $("#email").val().trim();
                const $msg = $("#findIdMsg");

                if (!name || !email) {
                    $msg.text("ì´ë¦„ê³¼ ì´ë©”ì¼ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.")
                        .removeClass().addClass("text-red-500 text-sm");
                    return;
                }

                $.ajax({
                    type: "POST",
                    url: "/user/findUserId",
                    data: { name, email },
                    success: function (res) {
                        if (res.result === 1) {
                            $msg.text(res.msg).removeClass().addClass("text-green-600 text-sm");
                        } else {
                            $msg.text("ì¼ì¹˜í•˜ëŠ” ì•„ì´ë””ê°€ ì—†ìŠµë‹ˆë‹¤.")
                                .removeClass().addClass("text-red-500 text-sm");
                        }
                    },
                    error: function () {
                        $msg.text("ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.")
                            .removeClass().addClass("text-red-500 text-sm");
                    }
                });
            });
        });

        $(document).ready(function () {
            const form = $("#findIdForm");

            if (form.length === 0) {
                console.error("âŒ findIdForm ìš”ì†Œ ëª» ì°¾ìŒ");
            } else {
                console.log("âœ… findIdForm ìš”ì†Œ ì°¾ìŒ");
            }

            form.on("submit", function (e) {
                e.preventDefault();
                console.log("ğŸ”¥ submit ì´ë²¤íŠ¸ ì‘ë™ë¨");
            });
        });

    </script>
</head>
<body class="bg-white">
<div class="flex min-h-screen">
    <!-- ì™¼ìª½ í¼ ì˜ì—­ -->
    <div class="w-1/2 flex flex-col justify-center items-center p-12">
        <h2 class="text-3xl font-bold mb-8">ì•„ì´ë”” ì°¾ê¸°</h2>
        <form id="findIdForm" class="w-full max-w-sm space-y-4">
            <div>
                <label for="name" class="block mb-1 text-sm font-medium">ì´ë¦„</label>
                <input type="text" id="name" name="name"
                       class="w-full border border-gray-300 rounded-md p-2" required />
            </div>
            <div>
                <label for="email" class="block mb-1 text-sm font-medium">ì´ë©”ì¼</label>
                <input type="email" id="email" name="email"
                       class="w-full border border-gray-300 rounded-md p-2" required />
            </div>
            <span id="findIdMsg" class="block text-sm"></span>
            <button type="submit" class="w-full bg-indigo-500 text-white p-2 rounded-md hover:bg-indigo-600 transition">
                ì•„ì´ë”” ì°¾ê¸°
            </button>
            <div class="flex justify-between space-x-2">
                <button id="btnFindPwd" type="button" class="border border-gray-300 px-3 py-1 rounded-md text-sm">
                    ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°
                </button>
                <button id="btnLogin" type="button" class="border border-gray-300 px-3 py-1 rounded-md text-sm">
                    ë¡œê·¸ì¸
                </button>
                <button id="btnUserReg" type="button" class="bg-black text-white px-3 py-1 rounded-md text-sm">
                    íšŒì›ê°€ì…
                </button>
            </div>
        </form>
    </div>

    <!-- ì˜¤ë¥¸ìª½ ë¡œê³  ì˜ì—­ -->
    <div class="w-1/2 bg-indigo-500 flex items-center justify-center">
        <img src="/images/logo1.png" alt="Savemate Logo" class="w-80 h-auto rounded-lg shadow-lg" />
    </div>
</div>

</body>
</html>
