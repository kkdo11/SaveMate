<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>SAVEMATE - 예산 설정</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <meta name="_csrf" th:content="${_csrf.token}" />
    <meta name="_csrf_header" th:content="${_csrf.headerName}" />
    <script th:inline="javascript">
        const isAuthenticated = /*[[${#authorization.expression('isAuthenticated()')}]]*/ false;
    </script>
</head>
<body class="bg-gradient-to-r from-indigo-100 via-purple-100 to-pink-100 text-gray-800 font-sans leading-relaxed min-h-screen">

<div th:replace="~{navbar :: navbar}"></div>

<main class="max-w-5xl mx-auto p-6 bg-white rounded-lg shadow mt-8">
    <h2 class="text-2xl font-semibold mb-4">예산 설정</h2>
    <p id="authNotice" class="text-sm text-red-500 hidden">⚠️ 로그인 후 예산을 등록할 수 있습니다.</p>

    <div class="mb-8">
        <form id="monthSearchForm" class="flex items-center space-x-2 mb-4">
            <label for="searchMonth" class="text-sm">월별 예산 조회</label>
            <input type="month" id="searchMonth" class="border rounded px-2 py-1" />
            <button type="button" id="searchBudgetBtn" class="bg-purple-500 text-white px-3 py-1 rounded hover:bg-purple-600 transition">조회</button>
            <button type="button" id="adjustCpiBudgetBtn" class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 transition disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                물가 반영
            </button>
        </form>
        <div id="monthlyBudgetResult">
            <div id="budgetList" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
            </div>
        </div>
    </div>

    <form id="budgetForm" class="grid grid-cols-1 md:grid-cols-6 gap-4 mb-8">
        <input type="hidden" id="budgetId" />

        <div class="md:col-span-2">
            <label class="text-sm">월 선택</label>
            <input type="month" id="budgetMonth" class="w-full border rounded px-3 py-2" />
        </div>

        <div class="md:col-span-2">
            <label class="text-sm">카테고리</label>
            <select id="budgetCategory" class="w-full border rounded px-3 py-2">
                <option value="">카테고리 선택</option>
                <option>식비</option><option>교통/이동</option><option>주거/공과금</option>
                <option>생활용품</option><option>의류/미용</option><option>의료/건강</option>
                <option>교육/도서</option><option>여가/문화</option><option>기타</option>
            </select>
        </div>

        <div class="md:col-span-1">
            <label class="text-sm">예산 금액</label>
            <input type="number" id="totalBudget" class="w-full border rounded px-3 py-2" />
        </div>

        <div class="md:col-span-1 flex items-end">
            <button type="submit" class="bg-indigo-600 text-white px-4 py-2 rounded w-full hover:bg-indigo-700">저장</button>
        </div>
    </form>
</main>

<script src="/js/budget.js"></script>

</body>
</html>